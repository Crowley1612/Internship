<template>
    <div class="container-fluid h-100">
        <div class="row h-100">
            <!-- Sidebar -->
            <Sidebar />

            <!-- Main content area -->
            <div class="col-md-10 p-4">
                <!-- Header -->
                <Header />

                <!-- Title -->
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h1>C√†i ƒë·∫∑t</h1>
                </div>

                <!-- Tabs and Content -->
                <div class="card shadow-sm p-4">
                    <a-tabs>
                        <a-tab-pane key="1" tab="C√†i ƒë·∫∑t t√†i kho·∫£n">
                            <div class="profile-info-container">
                                <div class="profile-header">
                                    <div class="profile-picture">
                                        <span>üë§</span>
                                    </div>
                                    <div class="profile-name">ƒê·ªó Th·ªã Thu H·∫±ng 1</div>
                                    <div class="verification"><i class="bi bi-check-lg"></i>ƒê√£ x√°c minh</div>
                                </div>

                                <div class="info-section">
                                    <div class="header">
                                        <h2>Th√¥ng tin c∆° b·∫£n</h2>
                                        <a href="#" class="edit-button"><i class="bi bi-pencil-square"></i> Thay ƒë·ªïi
                                            th√¥ng tin</a>
                                    </div>
                                    <div class="info">
                                        <div><strong>H·ªç v√† t√™n:</strong> ƒê·ªó Th·ªã Thu H·∫±ng 1</div>
                                    </div>
                                    <div class="info">
                                        <div><strong>M√£ s·ªë thu·∫ø:</strong> 0103930279</div>
                                        <div><strong>C√¥ng ty:</strong> Nacenncomm SCT</div>
                                    </div>
                                </div>

                                <div class="info-section">
                                    <div class="header">
                                        <h2>Th√¥ng tin t√†i kho·∫£n</h2>
                                    </div>
                                    <div class="info">
                                        <div><strong>T√™n t√†i kho·∫£n:</strong> hangdtt@cavvn.vn</div>
                                        <div class="email"><strong>Email:</strong> hangdtt@cavvn.vn <span>‚úîÔ∏è</span>
                                        </div>
                                    </div>
                                    <div class="info">
                                        <div><strong>S·ªë ƒëi·ªán tho·∫°i:</strong> 0902432283</div>
                                    </div>
                                </div>
                            </div>
                        </a-tab-pane>

                        <a-tab-pane key="2" tab="Ph∆∞∆°ng th·ª©c k√Ω">
                            <div class="container">
                                <div class="header">
                                    <h2>Th√¥ng tin ch·ªØ k√Ω s·ªë</h2>
                                </div>
                                <div class="info">
                                    <div>
                                        <label>Email:</label>
                                        <input type="text" value="hangdtt@cavvn.vn" readonly>
                                    </div>
                                    <div>
                                        <label>M√£ ƒëƒÉng k√Ω:</label>
                                        <input type="text" value="400196" readonly>
                                    </div>
                                </div>
                                <div class="info">
                                    <div>
                                        <label>Ng√†y h·∫øt h·∫°n CTS:</label>
                                        <input type="text" value="08-07-2025 09:37:46" readonly>
                                    </div>
                                    <div>
                                        <label>Serial number:</label>
                                        <input type="text" value="5402BC5ACCE669C202300000007A3" readonly>
                                    </div>
                                </div>
                                <div class="long-info">
                                    <label>Th√¥ng tin ch·ª©ng th∆∞ s·ªë:</label>
                                    <textarea readonly>
C=VN, ST=H√† N·ªôi, L=TDP VƒÉn Tr√¨ 4, Minh Khai, B·∫Øc T·ª´ Li√™m, H√† N·ªôi, 0.9.2342.19200300.100.1=CCCCD:001191009538, O=ƒê·ªó Th·ªã Thu H·∫±ng, E=hangdtt@cavvn.vn, CN=ƒê·ªó Th·ªã Thu H·∫±ng
            </textarea>
                                </div>
                            </div>
                            <div class="container">
                                <h2>C√†i ƒë·∫∑t ph∆∞∆°ng th·ª©c</h2>
                                <div class="section">
                                    <label>Ch·ªçn ph∆∞∆°ng th·ª©c k√Ω:</label>
                                    <div class="radio-group">
                                        <label>
                                            <input type="radio" name="signingMethod" value="usb" checked>
                                            K√Ω b·∫±ng USB Token
                                        </label>
                                        <label>
                                            <input type="radio" name="signingMethod" value="remote">
                                            K√Ω b·∫±ng Remote Signing
                                        </label>
                                    </div>
                                    <label>M√£ ƒëƒÉng k√Ω:</label>
                                    <input type="text" value="400196" readonly>
                                    <button class="update-button">C·∫≠p nh·∫≠t</button>
                                </div>
                                <div class="section">
                                    <h2>C√†i ƒë·∫∑t hi·ªÉn th·ªã</h2>
                                    <div class="radio-group">
                                        <label>
                                            <input type="radio" name="displayMethod" value="displaySignature" checked>
                                            Hi·ªÉn th·ªã ch·ªØ k√Ω s·ªë
                                        </label>
                                        <label>
                                            <input type="radio" name="displayMethod" value="displayImage">
                                            Hi·ªÉn th·ªã ·∫£nh
                                        </label>
                                        <label>
                                            <input type="radio" name="displayMethod" value="displayBoth">
                                            Hi·ªÉn th·ªã ·∫£nh v√† ch·ªØ k√Ω s·ªë
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </a-tab-pane>
                        <a-tab-pane key="3" tab="ƒê·ªïi m·∫≠t kh·∫©u">
                            <div class="change-password-container">
                                <h2>Thay ƒë·ªïi m·∫≠t kh·∫©u</h2>
                                <p>M·∫≠t kh·∫©u y√™u c·∫ßu c√≥ t·ªëi thi·ªÉu 6 k√Ω t·ª± bao g·ªìm s·ªë, ch·ªØ c√°i th∆∞·ªùng, ch·ªØ c√°i in hoa, k√Ω
                                    t·ª± ƒë·∫∑c bi·ªát.</p>

                                <a-form :model="passwordForm" :rules="rules" layout="vertical" @submit="handleSubmit">
                                    <a-form-item label="M·∫≠t kh·∫©u c≈©" name="oldPassword" required>
                                        <a-input-password v-model="passwordForm.oldPassword"
                                            placeholder="Nh·∫≠p m·∫≠t kh·∫©u c≈©" />
                                    </a-form-item>

                                    <a-form-item label="M·∫≠t kh·∫©u m·ªõi" name="newPassword" required>
                                        <a-input-password v-model="passwordForm.newPassword"
                                            placeholder="Nh·∫≠p m·∫≠t kh·∫©u m·ªõi" />
                                    </a-form-item>

                                    <a-form-item label="X√°c nh·∫≠n m·∫≠t kh·∫©u m·ªõi" name="confirmPassword" required>
                                        <a-input-password v-model="passwordForm.confirmPassword"
                                            placeholder="Nh·∫≠p l·∫°i m·∫≠t kh·∫©u m·ªõi" />
                                    </a-form-item>

                                    <a-form-item>
                                        <a-button class="cancel-button" @click="handleCancel">H·ªßy</a-button>
                                        <a-button type="primary" html-type="submit" :loading="loading">X√°c
                                            nh·∫≠n</a-button>
                                    </a-form-item>
                                </a-form>
                                <div v-if="feedbackMessage" class="feedback-message">{{ feedbackMessage }}</div>
                            </div>
                        </a-tab-pane>
                    </a-tabs>
                </div>
            </div>
        </div>
    </div>
</template>

<script>
import Sidebar from '../layout/Sidebar.vue';
import Header from '../layout/Header.vue';

export default {
    components: {
        Sidebar,
        Header,
    },
    data() {
        return {
            passwordForm: {
                oldPassword: '',
                newPassword: '',
                confirmPassword: '',
            },
            rules: {
                oldPassword: [{ required: true, message: 'Vui l√≤ng nh·∫≠p m·∫≠t kh·∫©u c≈©' }],
                newPassword: [{ required: true, message: 'Vui l√≤ng nh·∫≠p m·∫≠t kh·∫©u m·ªõi' }],
                confirmPassword: [
                    { required: true, message: 'Vui l√≤ng nh·∫≠p l·∫°i m·∫≠t kh·∫©u m·ªõi' },
                    { validator: this.validatePasswordConfirmation },
                ],
            },
            loading: false,
            feedbackMessage: '',
        };
    },
    methods: {
        async handleSubmit() {
            this.loading = true;
            this.feedbackMessage = '';
            try {
                // Simulate API call
                await new Promise(resolve => setTimeout(resolve, 1000));
                this.feedbackMessage = 'M·∫≠t kh·∫©u ƒë√£ ƒë∆∞·ª£c thay ƒë·ªïi th√†nh c√¥ng.';
            } catch (error) {
                this.feedbackMessage = 'C√≥ l·ªói x·∫£y ra. Vui l√≤ng th·ª≠ l·∫°i.';
            } finally {
                this.loading = false;
            }
        },
        handleCancel() {
            this.passwordForm.oldPassword = '';
            this.passwordForm.newPassword = '';
            this.passwordForm.confirmPassword = '';
            this.feedbackMessage = '';
        },
        validatePasswordConfirmation(rule, value) {
            if (value !== this.passwordForm.newPassword) {
                return Promise.reject('M·∫≠t kh·∫©u x√°c nh·∫≠n kh√¥ng kh·ªõp');
            }
            return Promise.resolve();
        },
    },
};
</script>
<style scoped>
@import '@/assets/MasterPage.css';
@import '@/assets/Setting.css';
</style>
